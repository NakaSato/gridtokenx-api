@startuml GridTokenX_DFD_Level_1

title GridTokenX P2P Energy Trading - DFD Level 1

' External Entities
actor "Users\n(Producers &\nConsumers)" as E1 #FFE0B2
actor "Grid Operators" as E2 #FFE0B2
actor "Authority\n(Governance)" as E3 #FFE0B2
actor "External APIs\n(Weather, Price)" as E4 #FFE0B2

' Main Processes - Level 1
rectangle "1.0\nUser Authentication\n& Registration" as P1 #BBDEFB
rectangle "2.0\nEnergy Trading\nEngine" as P2 #BBDEFB
rectangle "3.0\nData Management\n& Analytics" as P3 #BBDEFB
rectangle "4.0\nSmart Meter\nIntegration" as P4 #BBDEFB
rectangle "5.0\nBlockchain\nInteraction" as P5 #BBDEFB
rectangle "6.0\nMonitoring &\nGovernance" as P6 #BBDEFB

' Data Stores
database "D1\nUser\nAccounts" as D1 #E8F5E8
database "D2\nEnergy\nTransactions" as D2 #E8F5E8
database "D3\nMeter\nConfigurations" as D3 #E8F5E8
database "D4\nSystem\nLogs" as D4 #E8F5E8

' Data Flows - User Authentication (1.0)
E1 --> P1 : Credentials\nWallet Address
P1 --> D1 : Store/Verify\nUser Account
D1 --> P1 : User Data\nAuthorization
P1 --> E1 : Auth Token\nSession

' Data Flows - Energy Trading (2.0)
E1 --> P2 : Create Order\nPrice, Amount
P2 --> D2 : Record\nTransaction
P2 --> P5 : Execute\nSmart Contract
P5 --> P2 : Transaction\nResult
P2 --> E1 : Order Status\nFilled/Pending

' Data Flows - Data Management (3.0)
P2 --> D2 : Write\nTrade Data
D2 --> P3 : Read\nEnergy Data
P3 --> D4 : Store\nAnalytics
P3 --> E1 : Dashboard\nReports

' Data Flows - Smart Meter (4.0)
E2 --> P4 : Meter\nConfiguration
P4 --> D3 : Store\nMeter Setup
D3 --> P4 : Retrieve\nMeter Info
P4 --> P3 : Energy\nReadings
E4 --> P4 : Weather\nData
P4 --> P2 : Available\nEnergy

' Data Flows - Blockchain (5.0)
P2 --> P5 : Trade\nInstruction
P5 --> E3 : Request\nValidation
E3 --> P5 : Block\nCreation
P5 --> D2 : Write\nTransaction

' Data Flows - Monitoring (6.0)
E3 --> P6 : System\nCommands
P1 --> P6 : Auth\nEvents
P2 --> P6 : Trade\nEvents
P4 --> P6 : Meter\nEvents
P6 --> E3 : Status\nAlerts
P6 --> D4 : Log\nEvents

@enduml